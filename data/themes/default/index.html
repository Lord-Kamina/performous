<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title></title>
  
  
  
  <link rel="stylesheet" href="https://d10ajoocuyu32n.cloudfront.net/mobile/1.3.1/jquery.mobile-1.3.1.min.css">
  
  <!-- Extra Codiqa features -->
  <link rel="stylesheet" href="codiqa.ext.css">
  
  <!-- jQuery and jQuery Mobile -->
  <script src="https://d10ajoocuyu32n.cloudfront.net/jquery-1.9.1.min.js"></script>
  <script src="https://d10ajoocuyu32n.cloudfront.net/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>

  <!-- Extra Codiqa features -->
  <script src="https://d10ajoocuyu32n.cloudfront.net/codiqa.ext.js"></script>  
  
  <!--script bindings-->
  <script>
    $(document).bind ("mobileinit", function ()
    {

      alert ("mobileinit");

    });
  </script> 
   
</head>
<body>
<!-- Home -->
<div data-role="page" id="page1">
    <div data-theme="a" data-role="header">
        <h3>
            Performous web frontend
        </h3>
        <div data-role="navbar" data-iconpos="top">
            <ul>
                <li>
                    <a href="#page1" data-transition="flip" data-theme="" data-icon="" class="ui-btn-active ui-state-persist">
                        Add songs
                    </a>
                </li>
                <li>
                    <a href="#page2" data-transition="flip" data-theme="" data-icon="">
                        View playlist
                    </a>
                </li>
                <li>
                    <a href="#page3" data-transition="flip" data-theme="" data-icon="">
                        Remote Control
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div data-role="content">
        <ul data-role="listview" id="SongListViewer" data-divider-theme="b" data-filter="true">
            <li data-role="list-divider" role="heading">
                Available songs
            </li>
            <li data-theme="c">
                <a href="#" data-transition="slide">
                    knop!
                </a>
            </li>
        </ul>
        
        <br> <br> <br>
        <div class="ui-grid-a">
            <div class="ui-block-a">
                <a id="databaseRefreshButton" data-role="button" href="#page1" data-icon="refresh" data-iconpos="top">
                    Refresh database
                </a>
            </div>
            <div class="ui-block-b">
                <a data-role="button" href="#page1" data-icon="plus" data-iconpos="top">
                    Add song to playlist
                </a>
            </div>
        </div>
    </div>
</div>

<!--page 2 PLAYLIST!!!!-->
<div data-role="page" id="page2">
    <div data-theme="a" data-role="header">
        <h3>
            Performous web frontend
        </h3>
        <div data-role="navbar" data-iconpos="top">
            <ul>
                <li>
                    <a href="#page1" data-transition="flip" data-theme="" data-icon="">
                        Add songs
                    </a>
                </li>
                <li>
                    <a href="#page2" data-transition="flip" data-theme="" data-icon="" class="ui-btn-active ui-state-persist">
                        View playlist
                    </a>
                </li>
                <li>
                    <a href="#page3" data-transition="flip" data-theme="" data-icon="">
                        Remote Control
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div data-role="content">	
            <div class="ui-block-d1">
                <a id="playlistRefreshButton" data-role="button" href="#page2" data-icon="refresh" data-iconpos="top">
                    Refresh Playlist
                </a>
      		</div>
      current playlist:
      <ol type="1">
      <playlist>
      </playlist>
      </ol>
   </div>
</div>

<!--page 3 Remote control!!!!-->
<div data-role="page" id="page3">
    <div data-theme="a" data-role="header">
        <h3>
            Performous web frontend
        </h3>
        <div data-role="navbar" data-iconpos="top">
            <ul>
                <li>
                    <a href="#page1" data-transition="flip" data-theme="" data-icon="">
                        Add songs
                    </a>
                </li>
                <li>
                    <a href="#page2" data-transition="flip" data-theme="" data-icon="">
                        View playlist
                    </a>
                </li>
                <li>
                    <a href="#page3" data-transition="flip" data-theme="" data-icon="" class="ui-btn-active ui-state-persist">
                        Remote Control
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>


</body>
</html>


<!-- down here will be all functions -->
 <script>

<!-- page 1-->
$(document).ready (function ()
{

  alert ("Welcome to the web-control of performous! here you can view the current playlist, add songs to it and control performous remotely. this is currently a work in progress so not everything will work yet");

});


</script>

<script>

 $("#databaseRefreshButton").bind ("click", function (event)
{
alert ("refreshing now");
 $.get("api/getDataBase.json", function(data) {
 alert(data);
$('#SongListViewer').empty();
  var DataBase = JSON.parse(data);
  alert("data parsed");
  
  $('#SongListViewer').append("<li data-role=\"list-divider\" role=\"heading\">Available songs </li> <li data-theme=\"c\">\n");
  
  for (i in DataBase) {
 $('#SongListViewer').append(" <li data-theme=\"c\"><a href=\"#\" data-transition=\"slide\">" + DataBase[i].Artist + " - " + DataBase[i].Title + "</a> </li>\n");
 alert(DataBase[i].Title);
}  
$('#SongListViewer').listview('refresh');
});
});


</script>


<!-- page 2-->
<script>

 $("#playlistRefreshButton").bind ("click", function (event)
{
 $.get("api/getCurrentPlaylist.json", function(data){
 $("playlist").empty();
 var SongList = JSON.parse(data);
	for(i in SongList) {
 	$("playlist").append("<li>" + SongList[i].Artist + " - " + SongList[i].Title + "</li>");
	}
});
});


</script>

